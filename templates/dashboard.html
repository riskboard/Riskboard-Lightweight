{% extends 'base.html' %}

{% block header %}
<h1 class="display-4 mx-auto txt-center">
  {% block title %}Dashboard{% endblock %}
</h1>
<!-- Leaflet-->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
crossorigin=""></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/heatmap.css') }}"/>
{% endblock %}

{% block content %}
<h3 class="mt-3 display-5">{{ form_data['companyName'] }} Information</h3>
<span>Contact Email: {{ form_data['email'] }}</span>

<h4 class="mt-4 display-5">Incidence Heatmap</h4>
<div id="mapid"></div>

<div class="container mt-4">
  <h3 class="display-5">Insights</h3>
  {% for i in range(form_data['num_locations']) %}
    <h4 class="display-7">{{ form_data['locations'][i]['name'] }}</h4>
    <div>{{ article_data[i]['themes'] }}</div>
    {% for article in article_data[i]['articles'] %}
      <div>({{loop.index}}) {{ article['url'] }}</div>
    {% endfor %}
  {% endfor %}
</div>
<script src="{{ url_for('static', filename='js/heatmap.js') }}"></script>
{% endblock %}
